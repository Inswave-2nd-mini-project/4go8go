<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>게시글 목록 | 4go8go</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <link rel="stylesheet" type="text/css" th:href="@{/css/header.css}" />
    <link rel="stylesheet" type="text/css" th:href="@{/css/footer.css}" />
    <link rel="stylesheet" type="text/css" th:href="@{/css/postlist.css}" />
</head>
<body>
<div th:replace="~{fragments/header :: header}"></div>
<div class="post-container">
    <div class="post-header">
        <h1 class="post-title">커뮤니티</h1>
        <p class="post-description">4go8go에서 다양한 이야기를 만나보세요</p>
        
        <div class="search-box">
            <form action="/post/search" method="get">
                <input type="text" name="keyword" class="search-input" placeholder="검색어를 입력하세요">
                <button type="submit" class="search-button">
                    <i class="bi bi-search"></i>
                </button>
            </form>
        </div>
        
        <a href="/post/new" class="btn-primary">
            <i class="bi bi-pencil-fill me-1"></i> 새 글 작성
        </a>
    </div>
    
    <div class="post-list">
        <div th:each="post : ${posts}" class="post-card">
            <div class="post-title-row">
                <a th:href="@{'/post/' + ${post.postId}}" th:text="${post.title}"></a>
                <span th:if="${post.commentCount > 0}" class="badge-comment">
                    <i class="bi bi-chat-dots-fill me-1"></i>
                    <span th:text="${post.commentCount}"></span>
                </span>
                <span th:if="${#dates.createNow().getTime() - post.createdAt.getTime() < 86400000}" class="badge-new">NEW</span>
            </div>
            
            <div class="post-info">
                <div class="post-meta">
                    <div class="post-meta-item">
                        <i class="bi bi-person"></i>
                        <span th:text="${post.userName}"></span>
                    </div>
                    <div class="post-meta-item">
                        <i class="bi bi-eye"></i>
                        <span th:text="${post.viewCount}"></span>
                    </div>
                    <div class="post-meta-item">
                        <i class="bi bi-calendar3"></i>
                        <span th:text="${#dates.format(post.createdAt, 'yyyy-MM-dd')}"></span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div th:if="${#lists.isEmpty(posts)}" class="empty-state">
        <i class="bi bi-journal-x"></i>
        <p>등록된 게시글이 없습니다.</p>
        <a href="/post/new" class="btn-primary">첫 번째 글 작성하기</a>
    </div>
    
    <!-- 페이지네이션 예시 (실제 구현은 컨트롤러에서 페이징 정보를 전달해야 함) -->
    <div class="pagination" th:if="${!#lists.isEmpty(posts)}">
        <a href="#" class="page-link"><i class="bi bi-chevron-left"></i></a>
        <a href="#" class="page-link active">1</a>
        <a href="#" class="page-link">2</a>
        <a href="#" class="page-link">3</a>
        <a href="#" class="page-link">4</a>
        <a href="#" class="page-link">5</a>
        <a href="#" class="page-link"><i class="bi bi-chevron-right"></i></a>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
<div th:replace="~{fragments/footer :: footer}"></div>
</html>
